<?php
/*
pv  => @gholipour3
channel => @botpanelmarzban
*/
//-----------------------------database-------------------------------
$dbname = "databasename"; //  Ù†Ø§Ù… Ø¯ÛŒØªØ§Ø¨ÛŒØ³
$username = "username"; // Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
$password = 'password'; // Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
$connect = mysqli_connect("localhost", $username, $password, $dbname);
//-----------------------------info-------------------------------

defined('API_KEY') or define('API_KEY', 'ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª');// ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
defined('limit_usertest') or define('limit_usertest', 10);//   Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø³Ø§Ø®Øª Ø§Ú©Ø§Ù†Øª ØªØ³Øª 
defined('val') or define('val', 100);// Ø­Ø¬Ù… Ø§Ú©Ø§Ù†Øª ØªØ³Øª ÙˆØ§Ø­Ø¯ Ù…Ú¯Ø§Ø¨Ø§ÛŒØª
defined('time') or define('time', 1); // Ø²Ù…Ø§Ù† Ø§Ú©Ø§Ù†Øª ØªØ³Øª  ÙˆØ§Ø­Ø¯ Ø³Ø§Ø¹Øª
defined('adminnumber') or define('adminnumber', 5522424631);// Ø¢ÛŒØ¯ÛŒ Ø¹Ø¯Ø¯ÛŒ Ø§Ø¯Ù…ÛŒÙ†
//-----------------------------text panel-------------------------------
$textdatabot = mysqli_query($connect, "SELECT * FROM textbot");
$datatxtbot = array();
foreach ($textdatabot as $row) {
    $datatxtbot[] = array(
        'id_text' => $row['id_text'],
        'text' => $row['text']
    );
}
$datatextbot = array(
    'text_usertest' => '',
    'text_info' => '',
    'text_support' => '',
    'text_help' => '',
    'text_start' => '',
    'text_bot_off' => '',
    'text_dec_info' => '',
    'text_dec_usertest' => '',
    'text_fq' => ''
);
foreach ($datatxtbot as $item) {
    if (isset($datatextbot[$item['id_text']])) {
        $datatextbot[$item['id_text']] = $item['text'];
    }
}
$keyboard = json_encode([
    'keyboard' => [
            [['text' => $datatextbot['text_info']], ['text' => $datatextbot['text_usertest']]],
            [['text' => $datatextbot['text_support']],['text' => $datatextbot['text_help']]],
            [['text' => $datatextbot['text_fq']]]
    ],
    'resize_keyboard' => true
]);
$keyboardadmin = json_encode([
    'keyboard' => [
        [['text' => "ğŸ“¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú©Ø§Ù†Ø§Ù„"],['text' => "ğŸ“Š Ø¢Ù…Ø§Ø± Ø±Ø¨Ø§Øª"]],
        [['text' => "ğŸ“¡ ÙˆØ¶Ø¹ÛŒØª  Ø±Ø¨Ø§Øª"]],
        [['text' => "ğŸ“¨ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±"],['text' => "ğŸ“ ØªÙ†Ø¸ÛŒÙ… Ù…ØªÙˆÙ† Ø±Ø¨Ø§Øª"]],
        [['text' => "ğŸ“œ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„ÛŒØ³Øª  Ø§Ø¯Ù…ÛŒÙ† Ù‡Ø§"]],
        [['text' => "ğŸ‘¨â€ğŸ’» Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø¯Ù…ÛŒÙ†"],['text' => "âŒ Ø­Ø°Ù Ø§Ø¯Ù…ÛŒÙ†"]],
        [['text' => "ğŸš« Ù…Ø³Ø¯ÙˆØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø±"]],
        [['text' => "ğŸ“š Ø¨Ø®Ø´ Ø¢Ù…ÙˆØ²Ø´ "],['text' => "ğŸ–¥ Ù¾Ù†Ù„ Ù…Ø±Ø²Ø¨Ø§Ù†"]],
        [['text' => "â™¨ï¸Ø¨Ø®Ø´ Ù‚ÙˆØ§Ù†ÛŒÙ†"]],
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ"]]
    ],
    'resize_keyboard' => true
]);
$keyboardhelpadmin = json_encode([
    'keyboard' => [
        [['text' => "ğŸ“š Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¢Ù…ÙˆØ²Ø´"],['text' => "âŒ Ø­Ø°Ù Ø¢Ù…ÙˆØ²Ø´ "]],
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"]]
    ],
    'resize_keyboard' => true
]);
$blockuserkey = json_encode([
    'keyboard' => [
        [['text' => "ğŸ”’ Ù…Ø³Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø±"],['text' => "ğŸ”“ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ø³Ø¯ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±"]],
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"]]
    ],
    'resize_keyboard' => true
]);
$confrimrolls = json_encode([
    'keyboard' => [
        [['text' => "âœ… Ù‚ÙˆØ§Ù†ÛŒÙ† Ø±Ø§ Ù…ÛŒ Ù¾Ø°ÛŒØ±Ù…"]],
    ],
    'resize_keyboard' => true
]);
$rollkey = json_encode([
    'keyboard' => [
        [['text' => "ğŸ’¡ Ø±ÙˆØ´Ù† / Ø®Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù† ØªØ§ÛŒÛŒØ¯ Ù‚ÙˆØ§Ù†ÛŒÙ†"],['text' => "âš–ï¸ Ù…ØªÙ† Ù‚Ø§Ù†ÙˆÙ†"]],
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"]]
    ],
    'resize_keyboard' => true
]);
$sendmessageuser = json_encode([
    'keyboard' => [
        [['text' => "âœ‰ï¸ Ø§Ø±Ø³Ø§Ù„ Ù‡Ù…Ú¯Ø§Ù†ÛŒ"],['text' => "ğŸ“¤ ÙÙˆØ±ÙˆØ§Ø±Ø¯ Ù‡Ù…Ú¯Ø§Ù†ÛŒ"]],
        [['text' => "âœï¸ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ú©Ø§Ø±Ø¨Ø±"]],
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"]]
    ],
    'resize_keyboard' => true
]);
$Feature_status = json_encode([
    'keyboard' => [
        [['text' => "Ù‚Ø§Ø¨Ù„ÛŒØª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ú©Ø§Ù†Øª"]],
        [['text' => "Ù‚Ø§Ø¨Ù„ÛŒØª Ø§Ú©Ø§Ù†Øª ØªØ³Øª"],['text' => "Ù‚Ø§Ø¨Ù„ÛŒØª Ø¢Ù…ÙˆØ²Ø´"]],
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"]]
    ],
    'resize_keyboard' => true
]);
$keyboardmarzban =  json_encode([
    'keyboard' => [
        [['text' => "â•Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø³Ø§Ø®Øª Ø§Ú©Ø§Ù†Øª ØªØ³Øª Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±"]],
        [['text' =>"â•Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø³Ø§Ø®Øª Ø§Ú©Ø§Ù†Øª ØªØ³Øª Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡"]],
        [['text' => 'ğŸ”Œ ÙˆØ¶Ø¹ÛŒØª Ù¾Ù†Ù„ '],['text' => "ğŸ–¥ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù¾Ù†Ù„  Ù…Ø±Ø²Ø¨Ø§Ù† "]],
        [['text' => "âŒ Ø­Ø°Ù Ù¾Ù†Ù„"]],
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"]]
    ],
    'resize_keyboard' => true
]);
$channelkeyboard = json_encode([
    'keyboard' => [
        [['text' => "ğŸ“£ ØªÙ†Ø¸ÛŒÙ… Ú©Ø§Ù†Ø§Ù„ Ø¬ÙˆÛŒÙ† Ø§Ø¬Ø¨Ø§Ø±ÛŒ"]],
        [['text' => "ğŸ”‘ Ø±ÙˆØ´Ù† / Ø®Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù† Ù‚ÙÙ„ Ú©Ø§Ù†Ø§Ù„"]],
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"]]
    ],
    'resize_keyboard' => true
]);
$backuser = json_encode([
    'keyboard' => [
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ"]]
    ],
    'resize_keyboard' => true
]);
$backadmin = json_encode([
    'keyboard' => [
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"]]
    ],
    'resize_keyboard' => true
]);
$result = $connect->query("SHOW TABLES LIKE 'marzban_panel'");
$table_exists = ($result->num_rows > 0);
if ($table_exists) {
    $namepanel = [];
    $marzbnget = mysqli_query($connect, "SELECT * FROM marzban_panel");
    while ($row = mysqli_fetch_assoc($marzbnget)) {
        $namepanel[] = [$row['name_panel']];
    }
    $list_marzban_panel = [
        'keyboard' => [],
        'resize_keyboard' => true,
    ];
    $list_marzban_panel['keyboard'][] = [
        ['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"],
    ];
    foreach ($namepanel as $button) {
        $list_marzban_panel['keyboard'][] = [
            ['text' => $button[0]]
        ];
    }
    $json_list_marzban_panel = json_encode($list_marzban_panel);
    $help = [];
    $helpname = mysqli_query($connect, "SELECT * FROM help");
    while ($row = mysqli_fetch_assoc($helpname)) {
        $help[] = [$row['name_os']];
    }
    $help_arr = [
        'keyboard' => [],
        'resize_keyboard' => true,
    ];
    $help_arr['keyboard'][] = [
        ['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ"],
    ];
    foreach ($help as $button) {
        $help_arr['keyboard'][] = [
            ['text' => $button[0]]
        ];
    }
    $json_list_help = json_encode($help_arr);
}
$list_marzban_panel_users = [
    'keyboard' => [],
    'resize_keyboard' => true,
];
$list_marzban_panel_users['keyboard'][] = [
    ['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ"],
];
foreach($namepanel as $button) {
    $list_marzban_panel_users['keyboard'][] = [
        ['text' => $button[0]]
    ];
}
$list_marzban_panel_user = json_encode($list_marzban_panel_users);
$textbot = json_encode([
    'keyboard' => [
        [['text' => "ØªÙ†Ø¸ÛŒÙ… Ù…ØªÙ† Ø´Ø±ÙˆØ¹"],['text' => "Ø¯Ú©Ù…Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆÛŒØ³"]],
        [['text' => "Ø¯Ú©Ù…Ù‡ Ø§Ú©Ø§Ù†Øª ØªØ³Øª"],['text' => "Ø¯Ú©Ù…Ù‡ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„"]],
        [['text' => "Ù…ØªÙ† Ø¯Ú©Ù…Ù‡ ğŸ“š  Ø¢Ù…ÙˆØ²Ø´"],['text' => "Ù…ØªÙ† Ø¯Ú©Ù…Ù‡ â˜ï¸ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ "]],
        [['text' => "ğŸ“ ØªÙ†Ø¸ÛŒÙ… Ù…ØªÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆÛŒØ³ "]],
        [['text' => "ğŸ“ ØªÙ†Ø¸ÛŒÙ… Ù…ØªÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª  Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„"]],
        [['text' => "ğŸ“ ØªÙ†Ø¸ÛŒÙ… Ù…ØªÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ"]],
        [['text' => "ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…Ø¯ÛŒØ±ÛŒØª"]]
    ],
    'resize_keyboard' => true
]);
